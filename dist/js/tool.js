!function(e){var t={};function n(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(1),e.exports=n(6)},function(e,t,n){Nova.booting(function(e,t,a){e.component("nova-mail",n(2))})},function(e,t,n){var a=n(3)(n(4),n(5),!1,null,null,null);e.exports=a.exports},function(e,t){e.exports=function(e,t,n,a,s,r){var o,l=e=e||{},i=typeof e.default;"object"!==i&&"function"!==i||(o=e,l=e.default);var c,u="function"==typeof l?l.options:l;if(t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0),n&&(u.functional=!0),s&&(u._scopeId=s),r?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},u._ssrRegister=c):a&&(c=a),c){var d=u.functional,m=d?u.render:u.beforeCreate;d?(u._injectStyles=c,u.render=function(e,t){return c.call(t),m(e,t)}):u.beforeCreate=m?[].concat(m,c):[c]}return{esModule:o,exports:l,options:u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["resourceId","panel"],data:function(){return{mailTemplates:[],selectedTemplate:"",templateOverride:"",to:"",subject:"",model:{}}},mounted:function(){this.getMailTemplates(),this.getMailable()},computed:{hasTemplates:function(){return Boolean(this.mailTemplates.length)}},methods:{getMailTemplates:function(){var e=this;Nova.request().get("/nova-mail/templates").then(function(t){var n=t.data;return e.mailTemplates=n.templates||[]})},getMailable:function(){var e=this;Nova.request().post("/nova-mail/mailable",{mailableClass:this.panel.fields[0].model,mailableId:this.resourceId}).then(function(t){var n=t.data;e.model=n.model,e.to=n.to})},handleSendMail:function(){var e=this;Nova.request().post("/nova-mail/send/"+(this.selectedTemplate.id||""),{model:this.panel.fields[0].model,resourceId:this.resourceId,content:this.templateOverride,to:this.to,subject:this.subject||this.selectedTemplate.subject}).then(function(t){t.data;e.resetForm(),e.$toasted.show("The mail has been sent.",{type:"success"})}).catch(function(t){return e.$toasted.show(t,{type:"error"})})},resetForm:function(){this.subject="",this.templateOverride="",this.selectedTemplate=""}},watch:{selectedTemplate:function(e,t){this.templateOverride=this.selectedTemplate.content,this.subject=this.selectedTemplate.subject}}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("div",{staticClass:"card mb-6 overflow-hidden"},[n("div",{staticClass:"flex border-b border-40 remove-bottom-border px-8"},[n("div",{staticClass:"w-full pt-6 pb-2"},[n("h3",{staticClass:"text-90 font-bold text-lg mb-4"},[e._v("Send mail to "+e._s(e.to))]),e._v(" "),e.hasTemplates?n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedTemplate,expression:"selectedTemplate"}],staticClass:"form-control form-select mb-4",attrs:{name:"mail_template_select",id:"mail-template-select",dusk:"mail-template-select"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectedTemplate=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",disabled:"disabled"}},[e._v("Select Mail Templateâ€¦")]),e._v(" "),e._l(e.mailTemplates,function(t,a){return n("option",{key:a,domProps:{value:t,textContent:e._s(t.name)}})})],2):e._e(),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.subject,expression:"subject"}],staticClass:"w-full form-control form-input form-input-bordered",attrs:{name:"subject",id:"subject",dusk:"subject",type:"text",placeholder:"Subject"},domProps:{value:e.subject},on:{input:function(t){t.target.composing||(e.subject=t.target.value)}}}),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.templateOverride,expression:"templateOverride"}],staticClass:"w-full form-control form-input form-input-bordered py-3 h-auto mt-4",attrs:{name:"template_override",id:"template-override",dusk:"template-override",rows:"10",placeholder:"Adjust the mail template here or craft an email from scratch! You can use normal blade syntax and include attributes from this resources model..."},domProps:{value:e.templateOverride},on:{input:function(t){t.target.composing||(e.templateOverride=t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"flex justify-between px-8 pb-6"},[n("button",{staticClass:"btn btn-default btn-primary inline-flex items-center relative mt-4",attrs:{type:"submit"},on:{click:e.handleSendMail}},[e._v("Send Mail")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"flex items-center mb-3"},[t("h4",{staticClass:"text-90 font-normal text-2xl flex-no-shrink"},[this._v("Mail")])])}]}},function(e,t){}]);